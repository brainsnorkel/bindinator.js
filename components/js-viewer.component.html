<!-- Copyright Â©2016-2017 Tonio Loewald -->
<h4
	data-component="disclose"
	data-bind="component(disclosed)=_component_.expand"
>
	Source Code
</h4>
<pre data-bind="show_if=_component_.expand">
	<code
		style="font-size: 12px; white-space: pre-wrap;"
		class="language-js"
	></code>
</pre>
<script>
/* global findOne, require, Prism, b8r, data */
'use strict';
	var code = findOne('code');

	b8r.component('components/disclose');

	function render(source) {
		require.lazy("https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min.js")
					  .then(() => {
					 		code.textContent = source.trim();
							Prism.highlightElement(code);
					  });
	}

	if(data.source) {
		render(data.source.split('\n').filter(s => s.trim()).join('\n'));
	} else if (data.url) {
		b8r.component('loading', 'components/loading')
			 .then(() => b8r.ajax(data.url))
			 .then(source => render(source));
	}
</script>
