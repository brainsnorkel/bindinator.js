<style>
	.test-report > * {
		padding: 2px 0;
		margin: 0;
	}

	.success {
		background-color: #afa;
	}

	.failure {
		background-color: #faa;
	}

	.test-report {
		display: none;
	}

	.test-report.test-show {
		display: flex;
	}

	.test-sizable {
		flex-grow: 1;
		min-width: 100px;
	}

	.test-transcript > p {
		margin: 0;
		padding: 2px;
	}
</style>
<h3><label><input type="checkbox" data-bind="checked=_component_.show">Test Results</label></h3>
<div class="test-report" data-bind="class(test-show)=_component_.show">
	<pre class="test-sizable" data-bind="text=_component_.source" style="overflow:hidden"></pre>
	<div data-component="sizer"></div>
	<div class="test-transcript test-sizable"></div>
</div>
<script>
	/* global require, findOne, b8r, data, set */
	'use strict';
	
	b8r.component('sizer', 'components/sizer');

	set({show: false});

	const Test = require('lib/test.js');
	Test.onError = () => set({show: true});
	Test.setReportContainer(findOne('.test-transcript'));
	const test_runner = new Function('Test', 'b8r', '_required_', data.source + `////# sourceURL=${component.getAttribute('data-component-id')}`); // jshint ignore:line

	try {
		test_runner.call(null, Test, b8r, data._required_);
	} catch(e) {
		set({show: true});
		Test.report(`test runner threw exception: ${e}`, 'failure');
	}
</script>