<!-- Bind-O-Matic.js Copyright (c) 2016 Tonio Loewald -->
<head>
	<title>Bind-O-Matic</title>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism-okaidia.css">
	<link rel="stylesheet" type="text/css" href="bom.css">
</head>
<body>
	<div class="layout">
		<div class="header">
			<h1>Bind-O-Matic.js</h1>
		</div>
		<div class="three_col">
			<div class="nav">
				<h3>Documentation</h3>
				<div data-component="list">
					<div 
						class="loadable"
						data-list="source_files" 
						data-bind="text=.name;attr(data-path)=.path"
						data-event="mouseup:demo.showDocs"
					>
						File Name
					</div>
				</div>
				<h3>Components</h3>
				<div data-component="list">
					<div
						class="loadable"
						data-list="components"
						data-bind="text=.name;attr(data-path)=.path"
						data-event="mouseup:demo.loadComponent"
					>
						File Name
					</div>
				</div>
			</div>
			<div class="content">
				<h1 id="title">Middle</h1>
				<div id="example"></div>
				<div><pre><code style="font-size: 12px" id="source-code" class="language-markup"></code></pre></div>
			</div>
			<div class="nav">
				<h3>Tests</h3>
				<a href="tests.html">Unit Tests</a>
			</div>
		</div>
		<div class="footer">
			<div>
				&copy; 2016 Tonio Loewald | <a href="http://loewald.com">loewald.com</a> | <a href="LICENSE.txt">License</a>
			</div>
		</div>
	</div>
	<script src="require.js"></script>
	<script src="bom.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jshint/2.9.3/jshint.min.js"></script>
	<script>
		// var Showdown = require("https://cdnjs.cloudflare.com/ajax/libs/showdown/1.4.3/showdown.min");
		BOM.register('demo', {
			showDocs: function(evt) {
				var source_file = evt.target.getAttribute('data-path');
			},
			loadComponent: function(evt) {
				var component_name = evt.target.getAttribute('data-path');
				BOM.component(component_name, 'components/' + component_name)
					 .then(component => {
					 		BOM.id('title').textContent = 'Component: ' + component_name;
							var element = BOM.id('example');
					 		BOM.empty(element);
					 		BOM.id('source-code').textContent = component._source.replace(/\t/g, '  ');
					 		require.lazy("https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min").then(() => {
					 			Prism.highlightElement(BOM.id('source-code'));
					 		});
					 		BOM.insertComponent(component, element);
					 });
			},
		});
		BOM.component('hello', 'components/hello');
		BOM.json('source-files.json').then(data => BOM.register('source_files', data));
		BOM.json('components.json').then(data => BOM.register('components', data));
	</script>
</body>